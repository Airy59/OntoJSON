#!/bin/bash
# OntoJSON launcher for macOS app bundle

# Get the directory of this script
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
# Go up to the app bundle's parent directory
APP_ROOT="$( cd "$DIR/../../.." && pwd )"

# Change to the project directory
cd "$APP_ROOT"

# Set the app name for the dock
export __CFBundleName="OntoJSON"
export __CFBundleDisplayName="OntoJSON"
export __CFBundleIdentifier="com.owl2jsonschema.ontojson"

# Determine which Python to use
if [ -f "$APP_ROOT/.venv/bin/python3" ]; then
    # Use virtual environment Python if available
    PYTHON_CMD="$APP_ROOT/.venv/bin/python3"
    echo "Using virtual environment Python: $PYTHON_CMD" >&2
elif [ -f "$APP_ROOT/venv/bin/python3" ]; then
    # Alternative venv location
    PYTHON_CMD="$APP_ROOT/venv/bin/python3"
    echo "Using virtual environment Python: $PYTHON_CMD" >&2
else
    # Fall back to system Python
    PYTHON_CMD="python3"
    echo "Warning: Using system Python. PyQt6 may not be available." >&2
fi

# Launch the application
exec "$PYTHON_CMD" launch_ontojson.py "$@"
